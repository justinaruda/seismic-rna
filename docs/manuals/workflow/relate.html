<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Relate each read to every reference position &mdash; seismic-rna  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon-32x32.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            seismic-rna
              <img src="../../_static/logo-200.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/index.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Manuals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/seismicrna.html">seismicrna package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../formats/index.html">File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data/index.html">Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../algos/index.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../issues.html">Bugs and Requests</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">seismic-rna</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Relate each read to every reference position</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/manuals/workflow/relate.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="relate-each-read-to-every-reference-position">
<span id="step-relate"></span><h1>Relate each read to every reference position<a class="headerlink" href="#relate-each-read-to-every-reference-position" title="Permalink to this headline"></a></h1>
<section id="input-files-for-relate">
<h2>Input files for relate<a class="headerlink" href="#input-files-for-relate" title="Permalink to this headline"></a></h2>
<p>Relate requires exactly one FASTA file containing one or more reference
sequences and any number of alignment map files in SAM/BAM/CRAM format
(referred to collectively as “XAM” format).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The references in the FASTA file must match those to which the reads
were aligned to produce the XAM file(s); the names and the sequences
must be identical. If the names differ, then the XAM files using the
old names will be ignored; while if the sequences differ, then reads
can yield erroneous relation vectors or fail to yield any output.</p>
</div>
<section id="one-xam-file">
<h3>One XAM file<a class="headerlink" href="#one-xam-file" title="Permalink to this headline"></a></h3>
<p>A single XAM file (<code class="docutils literal notranslate"><span class="pre">sample_1/align/ref_1.bam</span></code>) can be run as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seismic</span> <span class="n">relate</span> <span class="n">refs</span><span class="o">.</span><span class="n">fa</span> <span class="n">sample_1</span><span class="o">/</span><span class="n">align</span><span class="o">/</span><span class="n">ref_1</span><span class="o">.</span><span class="n">bam</span>
</pre></div>
</div>
</section>
<section id="multiple-xam-files">
<h3>Multiple XAM files<a class="headerlink" href="#multiple-xam-files" title="Permalink to this headline"></a></h3>
<p>Multiple XAM files can be run in parallel by giving multiple paths:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seismic</span> <span class="n">relate</span> <span class="n">refs</span><span class="o">.</span><span class="n">fa</span> <span class="n">sample_1</span><span class="o">/</span><span class="n">align</span><span class="o">/</span><span class="n">ref_1</span><span class="o">.</span><span class="n">bam</span>
</pre></div>
</div>
<p>and/or by using <a href="#id1"><span class="problematic" id="id2">`glob patterns`_</span></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seismic</span> <span class="n">relate</span> <span class="n">refs</span><span class="o">.</span><span class="n">fa</span> <span class="n">sample_</span><span class="o">*/</span><span class="n">align</span><span class="o">/</span><span class="n">ref_1</span><span class="o">.</span><span class="n">bam</span> <span class="n">sample_</span><span class="o">*/</span><span class="n">align</span><span class="o">/</span><span class="n">ref_2</span><span class="o">.</span><span class="n">bam</span>
</pre></div>
</div>
</section>
<section id="xam-file-content-requirements">
<h3>XAM file content requirements<a class="headerlink" href="#xam-file-content-requirements" title="Permalink to this headline"></a></h3>
<p>Generally, a XAM file can contain reads that have aligned to any number
of reference, as well as unaligned reads. However, SEISMIC-RNA requires
that each XAM file contain reads aligned to exactly one reference. This
restriction enables the relate step to process XAM files in parallel,
which increases the speed. If the XAM files were created using <code class="docutils literal notranslate"><span class="pre">seismic</span>
<span class="pre">align</span></code>, then they are guaranteed follow this convention.</p>
</section>
<section id="xam-file-path-requirements">
<h3>XAM file path requirements<a class="headerlink" href="#xam-file-path-requirements" title="Permalink to this headline"></a></h3>
<p>The name of the XAM file (minus the file extension) must be the name of
the reference to which it was aligned. It must be inside a directory
named <code class="docutils literal notranslate"><span class="pre">align</span></code>, which must be inside a directory named after the sample
from which the reads came. If the BAM files were created using <code class="docutils literal notranslate"><span class="pre">seismic</span>
<span class="pre">align</span></code>, then they will already follow this convention.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, the Rouskin Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
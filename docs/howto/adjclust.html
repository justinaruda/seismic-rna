<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Add/Delete Orders to/from an Already-Clustered Dataset &mdash; seismic-rna  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon-32x32.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Clean FASTA Files" href="cleanfa.html" />
    <link rel="prev" title="List Positions Matching Criteria" href="lists.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            seismic-rna
              <img src="../_static/logo-200.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../steps/index.html">Step-By-Step</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">How To</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="run/index.html">Run SEISMIC-RNA</a></li>
<li class="toctree-l2"><a class="reference internal" href="graph/index.html">Graph Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="lists.html">List Positions Matching Criteria</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Add/Delete Orders to/from an Already-Clustered Dataset</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#background-about-adding-deleting-orders-of-clusters">Background about adding/deleting orders of clusters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#purpose-of-adding-clusters">Purpose of adding clusters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#purpose-of-deleting-clusters">Purpose of deleting clusters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-add-delete-orders-to-from-a-cluster-dataset">How to add/delete orders to/from a Cluster dataset</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#command-line-for-adding-orders">Command line for adding orders</a></li>
<li class="toctree-l4"><a class="reference internal" href="#command-line-for-deleting-orders">Command line for deleting orders</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cleanfa.html">Clean FASTA Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="inputs.html">List Input Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="sections.html">Define Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="normalize.html">Normalize Mutation Rates</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel.html">Parallelize Tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Log Messages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Commands, Arguments, Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/seismicrna.html">seismicrna package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../formats/index.html">File Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data/index.html">Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algos/index.html">Algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issues.html">Bugs and Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writeme.html">How to Write this Manual</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">seismic-rna</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">How To</a></li>
      <li class="breadcrumb-item active">Add/Delete Orders to/from an Already-Clustered Dataset</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/howto/adjclust.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="add-delete-orders-to-from-an-already-clustered-dataset">
<h1>Add/Delete Orders to/from an Already-Clustered Dataset<a class="headerlink" href="#add-delete-orders-to-from-an-already-clustered-dataset" title="Link to this heading"></a></h1>
<section id="background-about-adding-deleting-orders-of-clusters">
<h2>Background about adding/deleting orders of clusters<a class="headerlink" href="#background-about-adding-deleting-orders-of-clusters" title="Link to this heading"></a></h2>
<p>You can use <code class="docutils literal notranslate"><span class="pre">+addclust</span></code> and <code class="docutils literal notranslate"><span class="pre">+delclust</span></code> to adjust the maximum number of
clusters in (i.e. maximum order of) a dataset that you have already clustered
with <code class="docutils literal notranslate"><span class="pre">seismic</span> <span class="pre">cluster</span></code>.</p>
<section id="purpose-of-adding-clusters">
<h3>Purpose of adding clusters<a class="headerlink" href="#purpose-of-adding-clusters" title="Link to this heading"></a></h3>
<p>After you run <code class="docutils literal notranslate"><span class="pre">seismic</span> <span class="pre">cluster</span></code>, you may wish that you had used a higher limit
for the number of clusters (i.e. maximum order).
You could increase the maximum order simply by rerunning <code class="docutils literal notranslate"><span class="pre">seismic</span> <span class="pre">cluster</span></code>
using <code class="docutils literal notranslate"><span class="pre">--force</span></code> and a larger value for <code class="docutils literal notranslate"><span class="pre">--max-clusters</span></code> (<code class="docutils literal notranslate"><span class="pre">-k</span></code>).
Since <code class="docutils literal notranslate"><span class="pre">seismic</span> <span class="pre">cluster</span></code> always begins with 1 cluster, you would need to repeat
all the orders that you had already run before being able to add more – a waste
of your computer resources.
A more efficient command to increase the maximum order is <code class="docutils literal notranslate"><span class="pre">seismic</span> <span class="pre">+addclust</span></code>,
which merely tests higher orders of clustering and, if successful, appends them
to your existing results.</p>
</section>
<section id="purpose-of-deleting-clusters">
<h3>Purpose of deleting clusters<a class="headerlink" href="#purpose-of-deleting-clusters" title="Link to this heading"></a></h3>
<p>After you run <code class="docutils literal notranslate"><span class="pre">seismic</span> <span class="pre">cluster</span></code>, you may realize that higher orders are not
useful for your analysis or have unwanted artifacts.
If you simply ignored them, they would still waste space on your file system:
higher orders result in larger files of cluster batches and cluster tables and
more numerous files during graphing.
You could decrease the maximum order simply by rerunning <code class="docutils literal notranslate"><span class="pre">seismic</span> <span class="pre">cluster</span></code>
using <code class="docutils literal notranslate"><span class="pre">--force</span></code> and a smaller value for <code class="docutils literal notranslate"><span class="pre">--max-clusters</span></code> (<code class="docutils literal notranslate"><span class="pre">-k</span></code>).
Since your clustering results would already exist – you would merely want to
delete some of them – any approach that would require rerunning clustering
would not be the most efficient.
A more efficient command to decrease the maximum order is <code class="docutils literal notranslate"><span class="pre">seismic</span> <span class="pre">+delclust</span></code>,
which merely deletes higher orders of clustering from your results.</p>
</section>
</section>
<section id="how-to-add-delete-orders-to-from-a-cluster-dataset">
<h2>How to add/delete orders to/from a Cluster dataset<a class="headerlink" href="#how-to-add-delete-orders-to-from-a-cluster-dataset" title="Link to this heading"></a></h2>
<section id="command-line-for-adding-orders">
<span id="addclust"></span><h3>Command line for adding orders<a class="headerlink" href="#command-line-for-adding-orders" title="Link to this heading"></a></h3>
<p>Suppose you have already run clustering with a maximum order of 3 (<code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">3</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seismic</span> <span class="n">cluster</span> <span class="o">-</span><span class="n">k</span> <span class="mi">3</span> <span class="p">{</span><span class="n">out</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">sample</span><span class="p">}</span><span class="o">/</span><span class="n">mask</span><span class="o">/</span><span class="p">{</span><span class="n">ref</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">sect</span><span class="p">}</span>
</pre></div>
</div>
<p>If this dataset stopped at order 1 or 2 (because the BIC failed to decrease),
then you cannot add any higher orders.
If this dataset stopped at order 3 (because that was the limit), then you can
add higher orders using <code class="docutils literal notranslate"><span class="pre">seismic</span> <span class="pre">+addclust</span></code>, specifying a new maximum order
(e.g. 5) and the Cluster report(s) as input file(s):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seismic</span> <span class="o">+</span><span class="n">addclust</span> <span class="o">-</span><span class="n">k</span> <span class="mi">5</span> <span class="p">{</span><span class="n">out</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">sample</span><span class="p">}</span><span class="o">/</span><span class="n">cluster</span><span class="o">/</span><span class="p">{</span><span class="n">ref</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">sect</span><span class="p">}</span>
</pre></div>
</div>
<p>This command will start clustering with one more than the previous maximum order
(in this case, the previous maximum was 3, so <code class="docutils literal notranslate"><span class="pre">+addclust</span></code> will begin at 4).
The rules for stopping based on the BIC are the same as in <code class="docutils literal notranslate"><span class="pre">seismic</span> <span class="pre">cluster</span></code>
(see <a class="reference internal" href="run/cluster.html#cluster-max"><span class="std std-ref">Cluster setting: Maximum order (number of clusters)</span></a> for more information).
You do not need to specify any other settings for clustering, such as the number
of runs or the threshold for convergence: <code class="docutils literal notranslate"><span class="pre">+addclust</span></code> automatically uses the
same settings that you used originally in <code class="docutils literal notranslate"><span class="pre">cluster</span></code>.</p>
<p>You can give any number of Cluster report files as inputs for <code class="docutils literal notranslate"><span class="pre">+addclust</span></code>.
See <a class="reference internal" href="inputs.html"><span class="doc">List Input Files</span></a> for ways to list multiple files.</p>
<p>The only new files produced are <code class="docutils literal notranslate"><span class="pre">mus</span></code> and <code class="docutils literal notranslate"><span class="pre">props</span></code> files for each additional
clustering run.
The Cluster report file, the batch files, and the counts file are all updated
in-place, as if you had run <code class="docutils literal notranslate"><span class="pre">cluster</span></code> the first time with the new <code class="docutils literal notranslate"><span class="pre">-k</span></code>.</p>
</section>
<section id="command-line-for-deleting-orders">
<span id="delclust"></span><h3>Command line for deleting orders<a class="headerlink" href="#command-line-for-deleting-orders" title="Link to this heading"></a></h3>
<p>Suppose you have already run clustering with a maximum order of 3 (<code class="docutils literal notranslate"><span class="pre">-k</span> <span class="pre">3</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seismic</span> <span class="n">cluster</span> <span class="o">-</span><span class="n">k</span> <span class="mi">3</span> <span class="p">{</span><span class="n">out</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">sample</span><span class="p">}</span><span class="o">/</span><span class="n">mask</span><span class="o">/</span><span class="p">{</span><span class="n">ref</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">sect</span><span class="p">}</span>
</pre></div>
</div>
<p>You can delete orders above a limit using <code class="docutils literal notranslate"><span class="pre">seismic</span> <span class="pre">+delclust</span></code>, specifying a
new maximum order (e.g. 2) and the Cluster report(s) as input file(s):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">seismic</span> <span class="o">+</span><span class="n">delclust</span> <span class="o">-</span><span class="n">k</span> <span class="mi">2</span> <span class="p">{</span><span class="n">out</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">sample</span><span class="p">}</span><span class="o">/</span><span class="n">cluster</span><span class="o">/</span><span class="p">{</span><span class="n">ref</span><span class="p">}</span><span class="o">/</span><span class="p">{</span><span class="n">sect</span><span class="p">}</span>
</pre></div>
</div>
<p>This command will simply delete the results for higher orders (in this case, 3)
from the Cluster report file, the batch files, and the counts file.
It does not delete the <code class="docutils literal notranslate"><span class="pre">mus</span></code> and <code class="docutils literal notranslate"><span class="pre">props</span></code> files, since these files are small,
not used by any subsequent step, and not constrained by the maximum order.</p>
<p>You can give any number of Cluster report files as inputs for <code class="docutils literal notranslate"><span class="pre">+addclust</span></code>.
See <a class="reference internal" href="inputs.html"><span class="doc">List Input Files</span></a> for ways to list multiple files.</p>
<p>The Cluster report file, the batch files, and the counts file are all updated
in-place, as if you had run <code class="docutils literal notranslate"><span class="pre">cluster</span></code> the first time with the new <code class="docutils literal notranslate"><span class="pre">-k</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Be careful with <code class="docutils literal notranslate"><span class="pre">+delclust</span></code> because it will delete all orders greater than
<code class="docutils literal notranslate"><span class="pre">max-clusters</span></code> (<code class="docutils literal notranslate"><span class="pre">-k</span></code>).
Deleted orders cannot be restored directly; to regenerate them, you would
need to rerun clustering with <code class="docutils literal notranslate"><span class="pre">+addclust</span></code>.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="lists.html" class="btn btn-neutral float-left" title="List Positions Matching Criteria" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cleanfa.html" class="btn btn-neutral float-right" title="Clean FASTA Files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, the Rouskin Lab.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>